<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Deadlock | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323) Deadlock 일련의 프로세스들이 서로가 가진 자원을 기다리며 block된 상태  자원 하드웨어, 소프트웨어 등을 포함하느 개념 ex) I/O device, CPU cycle, memory space, semaphore">
<meta property="og:type" content="article">
<meta property="og:title" content="Deadlock">
<meta property="og:url" content="https://kojunhee.github.io/2018/10/09/Deadlock/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323) Deadlock 일련의 프로세스들이 서로가 가진 자원을 기다리며 block된 상태  자원 하드웨어, 소프트웨어 등을 포함하느 개념 ex) I/O device, CPU cycle, memory space, semaphore">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock01.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock02.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock03.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock04.png">
<meta property="og:updated_time" content="2018-10-10T09:26:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Deadlock">
<meta name="twitter:description" content="출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323) Deadlock 일련의 프로세스들이 서로가 가진 자원을 기다리며 block된 상태  자원 하드웨어, 소프트웨어 등을 포함하느 개념 ex) I/O device, CPU cycle, memory space, semaphore">
<meta name="twitter:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock01.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://kojunhee.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Deadlock" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/09/Deadlock/" class="article-date">
  <time datetime="2018-10-08T15:00:00.000Z" itemprop="datePublished">2018-10-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/OS/">OS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Deadlock
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>출처 : 이화여자대학교 반효경 (<a href="http://www.kocw.net/home/search/kemView.do?kemId=1046323" target="_blank" rel="noopener">http://www.kocw.net/home/search/kemView.do?kemId=1046323</a>)</p>
<h2 id="Deadlock"><a href="#Deadlock" class="headerlink" title="Deadlock"></a>Deadlock</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock01.png" alt="img"></p>
<p>일련의 프로세스들이 서로가 가진 자원을 기다리며 block된 상태</p>
<ul>
<li>자원<ul>
<li>하드웨어, 소프트웨어 등을 포함하느 개념</li>
<li>ex) I/O device, CPU cycle, memory space, semaphore 등</li>
</ul>
</li>
<li>예시<ul>
<li>시스템 2개의 tape drive가 있다</li>
<li>프로세스 P1과 P2 각각이 하나의 tape drive 를 보유한 채 다른 하나를 기다리고 있음</li>
</ul>
</li>
</ul>
<h2 id="Deadlock-발생의-4가지-조건"><a href="#Deadlock-발생의-4가지-조건" class="headerlink" title="Deadlock 발생의 4가지 조건"></a>Deadlock 발생의 4가지 조건</h2><ul>
<li>Mutual Exlusioin<ul>
<li>매 순간 하나의 프로세스만이 자원을 사용할 수 있음</li>
</ul>
</li>
<li>No Preemption <ul>
<li>프로세스는 자원을 스스로 내어놓을 뿐 강제로 뺏기지 않음 </li>
</ul>
</li>
<li>Hold and wiat <ul>
<li>자원을 가진 프로세스가 다른 자원을 기달리때 보유 자원을 놓지 않고 계속 가지고 있음</li>
</ul>
</li>
<li>Circular wait<ul>
<li>자워을 기다리는 프로세스 간에 사이클이 형성되어야 함 </li>
<li>P0은 P1이 가진 자원을 기다림</li>
<li>P1은 P2가 가진 자원을 기다림 ..</li>
</ul>
</li>
</ul>
<h2 id="자원-할당-그래프"><a href="#자원-할당-그래프" class="headerlink" title="자원 할당 그래프"></a>자원 할당 그래프</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock02.png" alt="img"></p>
<ul>
<li><p>자원에서 프로세스쪽으로 나가는 화살표 </p>
</li>
<li><p>이 프로세스가 이 자원을 가지고 있다.</p>
</li>
<li><p>프로세스에서 자원쪽으로 나가는 화살표</p>
<ul>
<li>이 프로세스가 이 자원을 요청</li>
</ul>
</li>
<li><p>자원 안에 동그라미</p>
<ul>
<li>자원 개수</li>
</ul>
</li>
<li><p>그래프 안에 cycle이 없으면 deadlock이 아니다</p>
</li>
<li><p>cycle이 있으면</p>
<ul>
<li>자원당 인스턴스가 하나밖에 없으면, 데드락</li>
<li>자원의 인스턴스가 여러개면, 데드락수도 있고 아닐수도 있고</li>
</ul>
</li>
<li><p>왼쪽은 데드락, 오른쪽은 데드락이 아님</p>
</li>
</ul>
<h2 id="Deadlock-Prevention"><a href="#Deadlock-Prevention" class="headerlink" title="Deadlock Prevention"></a>Deadlock Prevention</h2><p>자원 할당시 Deadlock의 4가지 필요 조건 중 어느 하나가 만족되지 않도록 하는 것 </p>
<ul>
<li>Mutual Exclusion<ul>
<li>공유해서는 안되는 자원의 경우 반드시 성립해야함 </li>
</ul>
</li>
<li>Hold and wait<ul>
<li>프로세스 시작 시 모든 필요한 자원을 할당받게 하는 방법</li>
<li>자원이 필요할 경우 보유 자원을 모두 놓고 다시 요청</li>
</ul>
</li>
<li>No preemption <ul>
<li>빼앗아 올수 있게 하면 됨 </li>
<li>모든 필요한 자원을 얻을 수 있을 때 그 프로세스는 다시 시작된다. </li>
</ul>
</li>
<li>Circular Wait<ul>
<li>모든 자원 유형에 할당 순서를 정하여 정해진 순서대로 자원 할당</li>
</ul>
</li>
</ul>
<h2 id="Deadlock-Avoidance"><a href="#Deadlock-Avoidance" class="headerlink" title="Deadlock Avoidance"></a>Deadlock Avoidance</h2><p>자원 요청에 대한 부가적인 정보를 이용해서 데드락의 가능성이 없는 경우에만 자원 할당.</p>
<p>데드락으로부터 항상 safe한 상태를 유지.</p>
<p>자원 요청에 대한 부가정보를 이용해서 자원 할당이 데드락으로부터 safe한지를 동적으로 조사해서 안전한 경우에만 할당.</p>
<p>프로세스들이 필요로 하는 각 자원별 최대 사용량을 미리 선언</p>
<ul>
<li>Single instance per resouce types <ul>
<li>Resource Allocation Graph algorithm</li>
</ul>
</li>
<li>Multiple instance per resouce types  <ul>
<li>Banker’s Algorithm</li>
</ul>
</li>
</ul>
<h2 id="Resource-Allocation-Graph-algorithm"><a href="#Resource-Allocation-Graph-algorithm" class="headerlink" title="Resource Allocation Graph algorithm"></a>Resource Allocation Graph algorithm</h2><p>자원 당 인스턴스 하나</p>
<p>데드락의 위험성이 있으면 애초부터 자원을 내주지 않음.</p>
<p>점선 화살표 : 이 프로세스가 평생 적어도 한번 이 자원을 사용할 것이다.</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock03.png" alt="img"></p>
<h2 id="Banker’s-Algorithm"><a href="#Banker’s-Algorithm" class="headerlink" title="Banker’s Algorithm"></a>Banker’s Algorithm</h2><p>자원 당 인스턴스 여러개</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/dealock04.png" alt="img"></p>
<p>5개의 프로세스 : P0 P1 P2 P3 P4</p>
<p>A자원 인스턴스 10개</p>
<p>B자원 인스턴스 5개</p>
<p>C자원 인스턴스 7개</p>
<ul>
<li><p>Allocation</p>
<ul>
<li>0번 프로세스는 현재 A 0개 / B 1개 / C 0개 할당되어 있음 </li>
</ul>
</li>
<li><p>Available</p>
<ul>
<li>현재 가용 자원</li>
<li>아무도 사용하지 않고 남아 있는 자원</li>
</ul>
</li>
<li>Max<ul>
<li>이 프로세스가 시작될 때, 이 프로세스가 평생 최대로 사용할 자원 개수를 선언했음</li>
</ul>
</li>
<li>Need<ul>
<li>추가로 요청 할 수  있는 양 </li>
</ul>
</li>
</ul>
<p>이 알고리즘은 프로세스가 자원을 요청했을 때, 이 요청을 받아들일것인지 결정하는 것임 </p>
<p>프로세스가 최대(Need)로 요청할 것을 가정한다. 그리고 이게 가용 자원으로 가능한지 체크. 가용자원으로 가능하지 않으면 요청을 거절.</p>
<p>P0는 7 4 3 으로 요청할것이다. 이게 3 3 2 로 커버 가능? NO. 요청 거절.</p>
<h2 id="Deadlock-Detection-and-recovery"><a href="#Deadlock-Detection-and-recovery" class="headerlink" title="Deadlock Detection and recovery"></a>Deadlock Detection and recovery</h2><p>Deadlock 발생은 허용하되 그에 대한 detection 루틴을 두어 deadlock 발생시 recover</p>
<ul>
<li>Single instance per resouce types <ul>
<li>Resource Allocation Graph algorithm</li>
<li>cycle이 곧 데드락</li>
</ul>
</li>
<li><p>Multiple instance per resouce types  </p>
<ul>
<li>Banker’s Algorithm과 유사한 방법 활용</li>
</ul>
</li>
<li><p>Recovery</p>
<ul>
<li><p>Process Termination</p>
<ul>
<li>abort all deadlocked processes(한꺼번에)</li>
<li>데드락에 연루된 프로세스드을 하나씩 죽여봄. 여전히 데드락이면 또 하나의 다른 프로세스 죽여봄.</li>
</ul>
</li>
<li><p>Resource Preemption</p>
<ul>
<li>데드락에 연루된 프로세스로부터 자원을 뺏음</li>
<li>safe state로 roolback하여 prcess를 restart</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Deadlock-Ignorance"><a href="#Deadlock-Ignorance" class="headerlink" title="Deadlock Ignorance"></a>Deadlock Ignorance</h2><p>Deadlock을 시스템이 책임지지 않음</p>
<p>UNIX를 포함한 대부분의 OS가 채택</p>
<p>데드락이 일어나지 않는다고 생각하고 아무런 조치 취하지 않음</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kojunhee.github.io/2018/10/09/Deadlock/" data-id="cjp7w7qt300hocxx7mf2q5icv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/10/09/Memory Management/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Memory Management
        
      </div>
    </a>
  
  
    <a href="/2018/10/09/활주로 건설/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">활주로 건설</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DIP/">DIP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPattern/">DesignPattern</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/boostcourse/">boostcourse</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cs/">cs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/dataStructure/">dataStructure</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ios/">ios</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/softwareEngineering/">softwareEngineering</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/22/Components/">Components</a>
          </li>
        
          <li>
            <a href="/2018/11/21/길찾기/">길찾기</a>
          </li>
        
          <li>
            <a href="/2018/11/21/flow control/">flow control</a>
          </li>
        
          <li>
            <a href="/2018/11/21/flow, congestion control/">flow, congestion control</a>
          </li>
        
          <li>
            <a href="/2018/11/13/SOLID/">SOLID</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>