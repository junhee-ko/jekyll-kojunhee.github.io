
<!DOCTYPE html>
<html lang="">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="junhee.ko">
    <title>File System - junhee.ko</title>
    <meta name="author" content="junhee.ko">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"junhee.ko","sameAs":["https://github.com/kojunhee","https://facebook.com/kojunheee","https://www.linkedin.com/in/junheeko","mailto"]},"articleBody":"출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323)\nFile and File System\nFile \n\n이름을 통해 접근 (cf. 메모리는 주소를 통해 접근)\nA named collection of related information\n일반적으로 비화발성의 보조기억장치에 저장\n운영체제는 다양한 저장 장치를 file이라는 동일한 논리적 단위로 볼 수 있게 해줌\n연산\ncreate / read / write / reposition (lseek) / delete / open / close\n\n\n\n\nFile attritbute ( or 파일의 metadata)\n\n파일 자체의 내용이 아니라 파일을 관리하기 위한 각종 정보들\n파일 이름, 유형, 저장된 위치, 파일 사이즈\n접근 권한 (읽기, 쓰기, 실행), 시간 (생성, 변경, 사용), 소유자 등\n\n\n\n\nFile System\n운영체제에서 파일을 관리하는 부분\n파일 및 파일의 메타데이터, 디렉토리 정보 등을 관리 \n파일의 저장 방법 결정\n파일 보호 등 \n\n\n\nDirectory and Logical Disk\nDirectory\n파일의 메타데이터 중 일부를 보관하고 있는 일종의 특별한 파일 \n그 디렉토리에 속한 파일 이름 및 파일 attribute 들\n연산\nsearch for a file, create a file, delete a file\nlist a direcotry, rename a file, traverse the file system\n\n\n\n\nPartition (==Logical Disk)\n하나의 물리적 디스크 안에 여러 파티션을 두는게 일바적\n물리적 디스크를 파티션으로 구성한 뒤 각각의 파티션에 file system을 깔거나 swapping 등 다른 용도로 사용 가능\n\n\n\nopen()\n\n\nopen시스템 콜을 하면 운영체제에게 CPU 제어권이 넘어가\n\n운영체제는 root를 먼저 open하여 root의 content를 찾아\n\na라는 파일의 메타데이터를 찾아서 이걸 메모리에 올려\n\na의 메타데이터로부터 a의 내용을 찾아\n\na안의 b의 metadata를 메모리에 올려\n\n\n각 프로세스마다 그 프로세스가 오픈한 파일들에 대한 메타데이터 포인터를 가지고 있는 일종의 배열이 있어\nb의 metadata를 가리키고 있는 index 가 file discriptor (fd) 를 사용자 프로세스에게 리턴\nread(fd..)\nfd를 가진 파일에서 읽어와\nA의 PCB에 가서 해당 fd에 대응하는 파일의 metadata로부터 b의 내용에 접근\nb 내용을 읽어서 운영체제가 자신의 메모리 공간 일부에 읽어놓음.\ncopy해서 사용자 프로그램에게 전달\n다른 프로그램이나 이 프로그램이 동일한 파일의 동일한 위치를 read 요청하면\n디스크까지 가는것이 아니라 운영체제가 읽어놓은거 바로 전달 \n이게 바로 Buffer caching\nFile Protection각 파일에 대해 누구에게 어떤 유형의 접근(read/write/execution) 을 허락할 것인가?\nAccess Control 방법\n\nAccess Control Matrix\n\n\n공간 낭비 발생해서\nAccess Control List : 파일별로 누구에게 어떤 접근 권한이 있는지 ( Linked list )\nCapability : 사용자 별로 자신이 접근 권한을 가진 파일 및 해당 권한 (Linked List)\n\n\nGrouping\n\n전체 user를 owner / group / public 의 세 그룹으로 구분\n각 파일에 대해서 세 그룹의 접근 권한(rwx)을 3 비트씩으로 표시\n9개의 비트만으로 표현 가능\n\n\n\n\npassword\n\n파일 마다 패스워드 두는 방법 ( 디렉토리 파일에 두는 방법도 가능)\n모든 접근 권한에 대해 하나의 패스워드 : all or nothing\n접근 권한별 패스워드 : 암기문제, 관리문제\n\n\n\nFile System의 Mounting\n루트 파일 시스템의 특정 디렉토리 이름에 또 다른 파티션에 있는 파일 시스템을 마운팅 하면,\n마운트 된 디렉토리에 접근하면 또 다른 파일 시스템의 루트 디렉토리에 접근하게 됨\nAccess Methods시스템이 제공하는 파일 정보의 접근 방식\n\n순차 접근\n카세트 테이프를 사용하는 방식처럼 접근\n읽거나 쓰면 offset은 자동적으로 접근\na b c 순서대로 저장되어 있는데 b 보고 싶으면 a를 먼저 접근해야함 \n\n\n직접 접근\n파일을 구성하는 레코드를 임의의 순서로 접근할 수 있음\na b c 순서대로 저장되어 있는데 b 보고 싶으면 바로 볼 수 있음\n\n\n\nAllocation of File Data in Disk\ncontiguous allocation\nLinked Allocation\nIndexed Allocation\n\nContiguous Allocation\n블럭의 크기가 2면, 0 1 이렇게 들어감.\ndirecotory 에 5개의 파일 메타데이터를 가지고 있음\n0번 위치부터 길이 2면, 0 1 이렇게 저장됨\n\n단점\n외부 조각이 생길 수 있어\n파일 크키가 커질 수 있다는 거에 제약 (=file grow가 어려움)\n파일 커질 것을 대비해서 미리 어느 정도 공간 할당하면 내부조각 발생 (공간의 낭비)\n\n\n장점\nFast I/O\n한번의 seek/rotation 으로 많은 bite transfer\nDirect access(=random access) 가능\nmail의 경우, 앞에서부터 5번째 보고 싶다. 그럼 19에다가 5 더하면 돼\n\n\n\nLinked Allocation\njeep이란 파일의 시작은 9번이고, 두번째 블럭은 9번에 적혀 있어.\n시작위치만 directory가 가지고 있어.\n\n장점\n외부조각 발생하지 않아\n\n\n단점\n직접 접근이 안돼\n4번째 위치 보려면 1, 2, 3 번째 봐야해\n한 sector가 고장나 pointer가 유실되면 많은 부분을 잃음\npointer를 위한 공간이 block의 일부가 되어 공간 효율성이 떨어짐\n\n\n변형\nFile allocation table (FAT) 파일 시스템\n\n\n\nIndexed Allocation\n\n장점\n외부 조각 발생하지 않아\ndirect access 가능\n\n\n단점 \nsmall file의 경우 공간 낭비\ntoo large file의 경우 하나의 block으로 index저장하기에 부족\n해결\nlinked scheme\nmultil-level index\n\n\n\n\n\n\n\nUNIX 파일 시스템의 구조\n\n\nBoot block\n어떤 파일 시스템이든 가장 먼저 나와\n부팅에 필요한 정보\n\n\nSuper block\n파일 시스템에 관한 총체적인 정보 담고 있음\n어디가 빈 블럭이고 어디가 사용되고 있는지\n어디부터 Inode list이고 data block 이고 ..\n\n\nInode list\n파일 하나당 Inode 하나 할당\nInode는 그 파일의 메타데이터를 가지고 있어\n파일의 이름은 디렉토리가 직접 가지고 있어\nindirect : 따라가면 index를 거쳐서 파일의 위치 정보 찾아\n\n\nData block\n파일의 실제 내용 보관\n\n\n\nFAT file system\n\nFAT\n위치 정보만 FAT가 가지고 있어\nFAT의 217 번지에 217번지의 다음 블럭 번지가 저장되어 있어\n직접 접근 가능(메모리에 올라와 있는 FAT만 참고하여 바로 위치 알아낼 수 있어)\n\n\n\nFree-Space Management중간 중간 비어 있는 블럭은 어떻게 관리?\n\n\nbit\n부가적인 공간을 필요\n연속적인 n개의 free block을 찾는데 효과적\n연속적으로 0인 공간을 찾는데 쉬워\n\n\n\n\n\nLinked Free-Space List on Disk\n\n모든 free block들을 링크로 연결 (free list)\n연속적인 가용 공간을 찾는 것은 쉽지 않다\n공간의 낭비가 없다\n\n\nGrouping\n\n\n비어 있는 위치가 index 역할\nlinked list 방법의 변형\n\n첫번째 free block 이 n개의 포인터를 가짐\n\n\n\nCounting\n\n(first free block, # of contiguous free blocks) 을 유지 \n\n\n\nDirectory Implementation\n\nLinear list\n&lt;file name, file의 metadata)의 list\n구현이 간단\n디렉토리 내에 파일이 있는지 찾기위해서는 linear search 필요\n\n\nHash table\n\nlinear list + hashing\nfile name을 이 파일의 linear list의 위치로 바꿔줌\nsearch time을 없앰\ncollision 발생 가능\n\n\nfile 의 metadata 보관 위치\n\n디렉토리 내에 직접 보관\n디렉토리에는 포인터를 두고 다른 곳에 보관\ninode, FAT 등\n\n\n\n\nLong file name의 지원\n\n\n 의 리스트에서 각 entry는 일반적으로 고정 크기\nfile name이 고정 크기의 entry길이보다 길어지는 경우 entry의 마지막 부분에 이름의 뒷 부분이 위치한 곳의 포인터를 두는 방법\n이름의 나머지 부분은 동일한 directory file의 일부에 존재\n\n\n\nVFS and NFS\n\nVirtual File System (VFS)\n서로 다른 다양한 file system에 대해 동일한 시스템콜 인터페이스를 통해 접근할 수 있게 해주는 OS의 layer\n\n\nNetwork File System\n분산 시스템에서는 네트워크를 통해 파일이 공유될 수 있음\n분산 환경에서의 대표적인 파일 공유 방법\n\n\n\nPage cache and Buffer cacheOS는 사용자 프로그램의 요청을 받아서 디스크에서 읽어온 내용을 그냥 전달하고 끝내는 것이 아니라, 자신의 버퍼 케쉬 영역에 읽어 놓고, 그 내용을 카피해서 사용자 프로그램에게 넘겨줘\n\n\nPage cache\nVirtual memory의 pagin system에서 사용하는 pafe frame을 caching의 관점에서 설명하는 용어\nMemory-Mapped I/O를 쓰는 경우 file의 I/O에서도 page cache 사용\n\n\nMemory-Mapped I/O\nfile의 일부를 virtual memory에 mapping\n매핑 시킨 영역에 대한 메모리 접근 연산은 파일의 입출력을 수행하게 함\n\n\nBuffer cache\n파일 시스템을 통한 I/O 연산은 메모리의 특정 영역인 buffer cache사용\nfile 사용의 locality 활용\n한번 읽어온 block에 대한 후속 요청시 buffer cache에서 즉시 전달\n모든 프로세스가 공용으로 사용\nReplacement algiritm 필요(LRU, LFU 등)\n\n\nUnified Buffer Cache\n최근의 OS에서는 기존의 buffer cahce가 page cache에 통합\n\n\n\n\n\n왼쪽\nread/write system call 하면 항상 OS에게 요청해서 받아옴\nmemory mapped IO를 쓰면, 일단 페이지 케쉬에 올라온 내용을 사용자 프로세스가 직접 메모리 접근해서 IO (이미 메모리에 올라온 내용은 커널의 도움을 받지 않음)\n\n\n\n","dateCreated":"2018-10-12T00:00:00+09:00","dateModified":"2018-10-16T13:55:18+09:00","datePublished":"2018-10-12T00:00:00+09:00","description":"","headline":"File System","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://kojunhee.github.io/2018/10/12/File System/"},"publisher":{"@type":"Organization","name":"junhee.ko","sameAs":["https://github.com/kojunhee","https://facebook.com/kojunheee","https://www.linkedin.com/in/junheeko","mailto"]},"url":"https://kojunhee.github.io/2018/10/12/File System/"}</script>
    <meta name="description" content="출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323) File and File System File   이름을 통해 접근 (cf. 메모리는 주소를 통해 접근) A named collection of related information 일반적으로 비화발성의 보조기억장치에 저장">
<meta property="og:type" content="blog">
<meta property="og:title" content="File System">
<meta property="og:url" content="https://kojunhee.github.io/2018/10/12/File System/index.html">
<meta property="og:site_name" content="junhee.ko">
<meta property="og:description" content="출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323) File and File System File   이름을 통해 접근 (cf. 메모리는 주소를 통해 접근) A named collection of related information 일반적으로 비화발성의 보조기억장치에 저장">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem01.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem02.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem03.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem04.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem05.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem06.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem07.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem08.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem09.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem10.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem11.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem12.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem13.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem20.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem14.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem15.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem16.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem17.png">
<meta property="og:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem18.png">
<meta property="og:updated_time" content="2018-10-16T04:55:18.840Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="File System">
<meta name="twitter:description" content="출처 : 이화여자대학교 반효경 (http://www.kocw.net/home/search/kemView.do?kemId=1046323) File and File System File   이름을 통해 접근 (cf. 메모리는 주소를 통해 접근) A named collection of related information 일반적으로 비화발성의 보조기억장치에 저장">
<meta name="twitter:image" content="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem01.png">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-du2xmrqdqrl2ollgeiw050kpl6l4nbyz7bumjuurjgsxyopifvukebxc9lqe.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">junhee.ko</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="Kategorien">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Kategorien</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="Archiv">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archiv</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/kojunhee" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://facebook.com/kojunheee" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.linkedin.com/in/junheeko" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/mailto" title="E-Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">E-Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            File System
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-10-12T00:00:00+09:00">
	
		    12 Oct 2018
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/os/">OS</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>출처 : 이화여자대학교 반효경 (<a href="http://www.kocw.net/home/search/kemView.do?kemId=1046323" target="_blank" rel="noopener">http://www.kocw.net/home/search/kemView.do?kemId=1046323</a>)</p>
<h2 id="File-and-File-System"><a href="#File-and-File-System" class="headerlink" title="File and File System"></a>File and File System</h2><ul>
<li><p>File </p>
<ul>
<li>이름을 통해 접근 (cf. 메모리는 주소를 통해 접근)</li>
<li>A named collection of related information</li>
<li>일반적으로 비화발성의 보조기억장치에 저장</li>
<li>운영체제는 다양한 저장 장치를 file이라는 동일한 논리적 단위로 볼 수 있게 해줌</li>
<li>연산<ul>
<li>create / read / write / reposition (lseek) / delete / open / close</li>
</ul>
</li>
</ul>
</li>
<li><p>File attritbute ( or 파일의 metadata)</p>
<ul>
<li>파일 자체의 내용이 아니라 파일을 관리하기 위한 각종 정보들<ul>
<li>파일 이름, 유형, 저장된 위치, 파일 사이즈</li>
<li>접근 권한 (읽기, 쓰기, 실행), 시간 (생성, 변경, 사용), 소유자 등</li>
</ul>
</li>
</ul>
</li>
<li>File System<ul>
<li>운영체제에서 파일을 관리하는 부분</li>
<li>파일 및 파일의 메타데이터, 디렉토리 정보 등을 관리 </li>
<li>파일의 저장 방법 결정</li>
<li>파일 보호 등 </li>
</ul>
</li>
</ul>
<h2 id="Directory-and-Logical-Disk"><a href="#Directory-and-Logical-Disk" class="headerlink" title="Directory and Logical Disk"></a>Directory and Logical Disk</h2><ul>
<li>Directory<ul>
<li>파일의 메타데이터 중 일부를 보관하고 있는 일종의 특별한 파일 </li>
<li>그 디렉토리에 속한 파일 이름 및 파일 attribute 들</li>
<li>연산<ul>
<li>search for a file, create a file, delete a file</li>
<li>list a direcotry, rename a file, traverse the file system</li>
</ul>
</li>
</ul>
</li>
<li>Partition (==Logical Disk)<ul>
<li>하나의 물리적 디스크 안에 여러 파티션을 두는게 일바적</li>
<li>물리적 디스크를 파티션으로 구성한 뒤 각각의 파티션에 file system을 깔거나 swapping 등 다른 용도로 사용 가능</li>
</ul>
</li>
</ul>
<h2 id="open"><a href="#open" class="headerlink" title="open()"></a>open()</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem01.png" alt="img"></p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem02.png" alt="img"></p>
<ol>
<li><p>open시스템 콜을 하면 운영체제에게 CPU 제어권이 넘어가</p>
</li>
<li><p>운영체제는 root를 먼저 open하여 root의 content를 찾아</p>
</li>
<li><p>a라는 파일의 메타데이터를 찾아서 이걸 메모리에 올려</p>
</li>
<li><p>a의 메타데이터로부터 a의 내용을 찾아</p>
</li>
<li><p>a안의 b의 metadata를 메모리에 올려</p>
</li>
</ol>
<p>각 프로세스마다 그 프로세스가 오픈한 파일들에 대한 메타데이터 포인터를 가지고 있는 일종의 배열이 있어</p>
<p>b의 metadata를 가리키고 있는 index 가 file discriptor (fd) 를 사용자 프로세스에게 리턴</p>
<p>read(fd..)</p>
<p>fd를 가진 파일에서 읽어와</p>
<p>A의 PCB에 가서 해당 fd에 대응하는 파일의 metadata로부터 b의 내용에 접근</p>
<p>b 내용을 읽어서 운영체제가 자신의 메모리 공간 일부에 읽어놓음.</p>
<p>copy해서 사용자 프로그램에게 전달</p>
<p>다른 프로그램이나 이 프로그램이 동일한 파일의 동일한 위치를 read 요청하면</p>
<p>디스크까지 가는것이 아니라 운영체제가 읽어놓은거 바로 전달 </p>
<p>이게 바로 Buffer caching</p>
<h2 id="File-Protection"><a href="#File-Protection" class="headerlink" title="File Protection"></a>File Protection</h2><p>각 파일에 대해 누구에게 어떤 유형의 접근(read/write/execution) 을 허락할 것인가?</p>
<p>Access Control 방법</p>
<ul>
<li><p>Access Control Matrix</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem03.png" alt="img"></p>
<ul>
<li>공간 낭비 발생해서</li>
<li>Access Control List : 파일별로 누구에게 어떤 접근 권한이 있는지 ( Linked list )</li>
<li>Capability : 사용자 별로 자신이 접근 권한을 가진 파일 및 해당 권한 (Linked List)</li>
</ul>
</li>
<li><p>Grouping</p>
<ul>
<li>전체 user를 owner / group / public 의 세 그룹으로 구분</li>
<li>각 파일에 대해서 세 그룹의 접근 권한(rwx)을 3 비트씩으로 표시</li>
<li><p>9개의 비트만으로 표현 가능</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem04.png" alt="img"></p>
</li>
</ul>
</li>
<li><p>password</p>
<ul>
<li>파일 마다 패스워드 두는 방법 ( 디렉토리 파일에 두는 방법도 가능)</li>
<li>모든 접근 권한에 대해 하나의 패스워드 : all or nothing</li>
<li>접근 권한별 패스워드 : 암기문제, 관리문제</li>
</ul>
</li>
</ul>
<h2 id="File-System의-Mounting"><a href="#File-System의-Mounting" class="headerlink" title="File System의 Mounting"></a>File System의 Mounting</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem05.png" alt="img"></p>
<p>루트 파일 시스템의 특정 디렉토리 이름에 또 다른 파티션에 있는 파일 시스템을 마운팅 하면,</p>
<p>마운트 된 디렉토리에 접근하면 또 다른 파일 시스템의 루트 디렉토리에 접근하게 됨</p>
<h2 id="Access-Methods"><a href="#Access-Methods" class="headerlink" title="Access Methods"></a>Access Methods</h2><p>시스템이 제공하는 파일 정보의 접근 방식</p>
<ul>
<li>순차 접근<ul>
<li>카세트 테이프를 사용하는 방식처럼 접근</li>
<li>읽거나 쓰면 offset은 자동적으로 접근</li>
<li>a b c 순서대로 저장되어 있는데 b 보고 싶으면 a를 먼저 접근해야함 </li>
</ul>
</li>
<li>직접 접근<ul>
<li>파일을 구성하는 레코드를 임의의 순서로 접근할 수 있음</li>
<li>a b c 순서대로 저장되어 있는데 b 보고 싶으면 바로 볼 수 있음</li>
</ul>
</li>
</ul>
<h2 id="Allocation-of-File-Data-in-Disk"><a href="#Allocation-of-File-Data-in-Disk" class="headerlink" title="Allocation of File Data in Disk"></a>Allocation of File Data in Disk</h2><ol>
<li>contiguous allocation</li>
<li>Linked Allocation</li>
<li>Indexed Allocation</li>
</ol>
<h2 id="Contiguous-Allocation"><a href="#Contiguous-Allocation" class="headerlink" title="Contiguous Allocation"></a>Contiguous Allocation</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem06.png" alt="img"></p>
<p>블럭의 크기가 2면, 0 1 이렇게 들어감.</p>
<p>direcotory 에 5개의 파일 메타데이터를 가지고 있음</p>
<p>0번 위치부터 길이 2면, 0 1 이렇게 저장됨</p>
<ul>
<li>단점<ul>
<li>외부 조각이 생길 수 있어</li>
<li>파일 크키가 커질 수 있다는 거에 제약 (=file grow가 어려움)</li>
<li>파일 커질 것을 대비해서 미리 어느 정도 공간 할당하면 내부조각 발생 (공간의 낭비)</li>
</ul>
</li>
<li>장점<ul>
<li>Fast I/O</li>
<li>한번의 seek/rotation 으로 많은 bite transfer</li>
<li>Direct access(=random access) 가능</li>
<li>mail의 경우, 앞에서부터 5번째 보고 싶다. 그럼 19에다가 5 더하면 돼</li>
</ul>
</li>
</ul>
<h2 id="Linked-Allocation"><a href="#Linked-Allocation" class="headerlink" title="Linked Allocation"></a>Linked Allocation</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem07.png" alt="img"></p>
<p>jeep이란 파일의 시작은 9번이고, 두번째 블럭은 9번에 적혀 있어.</p>
<p>시작위치만 directory가 가지고 있어.</p>
<ul>
<li>장점<ul>
<li>외부조각 발생하지 않아</li>
</ul>
</li>
<li>단점<ul>
<li>직접 접근이 안돼</li>
<li>4번째 위치 보려면 1, 2, 3 번째 봐야해</li>
<li>한 sector가 고장나 pointer가 유실되면 많은 부분을 잃음</li>
<li>pointer를 위한 공간이 block의 일부가 되어 공간 효율성이 떨어짐</li>
</ul>
</li>
<li>변형<ul>
<li>File allocation table (FAT) 파일 시스템</li>
</ul>
</li>
</ul>
<h2 id="Indexed-Allocation"><a href="#Indexed-Allocation" class="headerlink" title="Indexed Allocation"></a>Indexed Allocation</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem08.png" alt="img"></p>
<ul>
<li>장점<ul>
<li>외부 조각 발생하지 않아</li>
<li>direct access 가능</li>
</ul>
</li>
<li>단점 <ul>
<li>small file의 경우 공간 낭비</li>
<li>too large file의 경우 하나의 block으로 index저장하기에 부족<ul>
<li>해결<ul>
<li>linked scheme</li>
<li>multil-level index</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="UNIX-파일-시스템의-구조"><a href="#UNIX-파일-시스템의-구조" class="headerlink" title="UNIX 파일 시스템의 구조"></a>UNIX 파일 시스템의 구조</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem09.png" alt="img"></p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem10.png" alt="img"></p>
<ul>
<li>Boot block<ul>
<li>어떤 파일 시스템이든 가장 먼저 나와</li>
<li>부팅에 필요한 정보</li>
</ul>
</li>
<li>Super block<ul>
<li>파일 시스템에 관한 총체적인 정보 담고 있음</li>
<li>어디가 빈 블럭이고 어디가 사용되고 있는지</li>
<li>어디부터 Inode list이고 data block 이고 ..</li>
</ul>
</li>
<li>Inode list<ul>
<li>파일 하나당 Inode 하나 할당</li>
<li>Inode는 그 파일의 메타데이터를 가지고 있어</li>
<li>파일의 이름은 디렉토리가 직접 가지고 있어</li>
<li>indirect : 따라가면 index를 거쳐서 파일의 위치 정보 찾아</li>
</ul>
</li>
<li>Data block<ul>
<li>파일의 실제 내용 보관</li>
</ul>
</li>
</ul>
<h2 id="FAT-file-system"><a href="#FAT-file-system" class="headerlink" title="FAT file system"></a>FAT file system</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem11.png" alt="img"></p>
<ul>
<li>FAT<ul>
<li>위치 정보만 FAT가 가지고 있어</li>
<li>FAT의 217 번지에 217번지의 다음 블럭 번지가 저장되어 있어</li>
<li>직접 접근 가능(메모리에 올라와 있는 FAT만 참고하여 바로 위치 알아낼 수 있어)</li>
</ul>
</li>
</ul>
<h2 id="Free-Space-Management"><a href="#Free-Space-Management" class="headerlink" title="Free-Space Management"></a>Free-Space Management</h2><p>중간 중간 비어 있는 블럭은 어떻게 관리?</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem12.png" alt="img"></p>
<ul>
<li>bit<ul>
<li>부가적인 공간을 필요</li>
<li>연속적인 n개의 free block을 찾는데 효과적</li>
<li>연속적으로 0인 공간을 찾는데 쉬워</li>
</ul>
</li>
</ul>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem13.png" alt="img"></p>
<ul>
<li><p>Linked Free-Space List on Disk</p>
<ul>
<li>모든 free block들을 링크로 연결 (free list)</li>
<li>연속적인 가용 공간을 찾는 것은 쉽지 않다</li>
<li>공간의 낭비가 없다</li>
</ul>
</li>
<li><p>Grouping</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem20.png" alt="img"></p>
<ul>
<li>비어 있는 위치가 index 역할</li>
<li><p>linked list 방법의 변형</p>
</li>
<li><p>첫번째 free block 이 n개의 포인터를 가짐</p>
</li>
</ul>
</li>
<li><p>Counting</p>
<ul>
<li>(first free block, # of contiguous free blocks) 을 유지 </li>
</ul>
</li>
</ul>
<h2 id="Directory-Implementation"><a href="#Directory-Implementation" class="headerlink" title="Directory Implementation"></a>Directory Implementation</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem14.png" alt="img"></p>
<ul>
<li>Linear list<ul>
<li>&lt;file name, file의 metadata)의 list</li>
<li>구현이 간단</li>
<li>디렉토리 내에 파일이 있는지 찾기위해서는 linear search 필요</li>
</ul>
</li>
<li><p>Hash table</p>
<ul>
<li>linear list + hashing</li>
<li>file name을 이 파일의 linear list의 위치로 바꿔줌</li>
<li>search time을 없앰</li>
<li>collision 발생 가능</li>
</ul>
</li>
<li><p>file 의 metadata 보관 위치</p>
<ul>
<li>디렉토리 내에 직접 보관</li>
<li>디렉토리에는 포인터를 두고 다른 곳에 보관<ul>
<li>inode, FAT 등</li>
</ul>
</li>
</ul>
</li>
<li><p>Long file name의 지원</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem15.png" alt="img"></p>
<ul>
<li><file name,="" file의="" 메타데이터=""> 의 리스트에서 각 entry는 일반적으로 고정 크기</file></li>
<li>file name이 고정 크기의 entry길이보다 길어지는 경우 entry의 마지막 부분에 이름의 뒷 부분이 위치한 곳의 포인터를 두는 방법</li>
<li>이름의 나머지 부분은 동일한 directory file의 일부에 존재</li>
</ul>
</li>
</ul>
<h2 id="VFS-and-NFS"><a href="#VFS-and-NFS" class="headerlink" title="VFS and NFS"></a>VFS and NFS</h2><p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem16.png" alt="img"></p>
<ul>
<li>Virtual File System (VFS)<ul>
<li>서로 다른 다양한 file system에 대해 동일한 시스템콜 인터페이스를 통해 접근할 수 있게 해주는 OS의 layer</li>
</ul>
</li>
<li>Network File System<ul>
<li>분산 시스템에서는 네트워크를 통해 파일이 공유될 수 있음</li>
<li>분산 환경에서의 대표적인 파일 공유 방법</li>
</ul>
</li>
</ul>
<h2 id="Page-cache-and-Buffer-cache"><a href="#Page-cache-and-Buffer-cache" class="headerlink" title="Page cache and Buffer cache"></a>Page cache and Buffer cache</h2><p>OS는 사용자 프로그램의 요청을 받아서 디스크에서 읽어온 내용을 그냥 전달하고 끝내는 것이 아니라, 자신의 버퍼 케쉬 영역에 읽어 놓고, 그 내용을 카피해서 사용자 프로그램에게 넘겨줘</p>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem17.png" alt="img"></p>
<ul>
<li>Page cache<ul>
<li>Virtual memory의 pagin system에서 사용하는 pafe frame을 caching의 관점에서 설명하는 용어</li>
<li>Memory-Mapped I/O를 쓰는 경우 file의 I/O에서도 page cache 사용</li>
</ul>
</li>
<li>Memory-Mapped I/O<ul>
<li>file의 일부를 virtual memory에 mapping</li>
<li>매핑 시킨 영역에 대한 메모리 접근 연산은 파일의 입출력을 수행하게 함</li>
</ul>
</li>
<li>Buffer cache<ul>
<li>파일 시스템을 통한 I/O 연산은 메모리의 특정 영역인 buffer cache사용</li>
<li>file 사용의 locality 활용</li>
<li>한번 읽어온 block에 대한 후속 요청시 buffer cache에서 즉시 전달</li>
<li>모든 프로세스가 공용으로 사용</li>
<li>Replacement algiritm 필요(LRU, LFU 등)</li>
</ul>
</li>
<li>Unified Buffer Cache<ul>
<li>최근의 OS에서는 기존의 buffer cahce가 page cache에 통합</li>
</ul>
</li>
</ul>
<p><img src="https://github.com/KoJunHee/kojunhee.github.io/raw/master/img/osfilesystem18.png" alt="img"></p>
<ul>
<li>왼쪽<ul>
<li>read/write system call 하면 항상 OS에게 요청해서 받아옴</li>
<li>memory mapped IO를 쓰면, 일단 페이지 케쉬에 올라온 내용을 사용자 프로세스가 직접 메모리 접근해서 IO (이미 메모리에 올라온 내용은 커널의 도움을 받지 않음)</li>
</ul>
</li>
</ul>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/10/16/미생물 격리/" data-tooltip="미생물 격리" aria-label="FRÜHER: 미생물 격리">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/10/12/무선 충전/" data-tooltip="무선 충전" aria-label="NÄCHSTER: 무선 충전">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kojunhee.github.io/2018/10/12/File System/" title="Teilen auf Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://kojunhee.github.io/2018/10/12/File System/" title="Teilen auf Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://kojunhee.github.io/2018/10/12/File System/" title="Teilen auf Google Plus">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 junhee.ko. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/10/16/미생물 격리/" data-tooltip="미생물 격리" aria-label="FRÜHER: 미생물 격리">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2018/10/12/무선 충전/" data-tooltip="무선 충전" aria-label="NÄCHSTER: 무선 충전">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kojunhee.github.io/2018/10/12/File System/" title="Teilen auf Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://kojunhee.github.io/2018/10/12/File System/" title="Teilen auf Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://kojunhee.github.io/2018/10/12/File System/" title="Teilen auf Google Plus">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-times"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kojunhee.github.io/2018/10/12/File System/">
                    <i class="fab fa-facebook" aria-hidden="true"></i><span>Teilen auf Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://kojunhee.github.io/2018/10/12/File System/">
                    <i class="fab fa-twitter" aria-hidden="true"></i><span>Teilen auf Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://kojunhee.github.io/2018/10/12/File System/">
                    <i class="fab fa-google-plus" aria-hidden="true"></i><span>Teilen auf Google Plus</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">junhee.ko</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-vufjrm3fmbuttogo1hxuu0w9w0sesk5iyysjuguc2hdhufot9szxg8twijry.min.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
